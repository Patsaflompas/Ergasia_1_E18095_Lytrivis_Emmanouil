# Ergasia_1_E18095_Lytrivis_Emmanouil
Πρώτη υποχρεωτική εργασία στα Πληροφοριακά Συστήματα

Αρχικα δημιουργησα ενα docker image mongodb και εκει μεσα εκανα μια db "InfoSys" και μέσα εκει ενα collection "Students" που περασα εκει τα δεδομενα του students.json που μας ειχατε δωσει.
Ο κώδικας ειναι ελεγμενος με postman, στο οποιο για το Authorization εβαζα μονος μου το uuid του endpoint 2 στο header Authorization του postman request και ολα τρεξανε ομαλως.

Για το Authorization σε καθε endpoint περναω το request.headers/get('authorization') σε μια μεταβλητη uuid και ελεγχω αν το αποτελεσμα της is_session_valid με παραμετρο το uuid επιστρεφει εχει τιμη False, τοτε επιστρεφω μηνυμα λαθους και λεω οτι δεν εχει γινει authorization και δεν προχωραμε στα υπολοιπα κομματια του endpoint,αλλιως δεν κανω τιποτα.

Επεξηγηση κωδικα:

Endpoint 1:
  Μεσω μιας if users.find({"username":data["username"]}).count() == 0: ελέγχω αν μεσα στην συλλογη users υπάρχει ηδη καποια εγγραφη με key username και key value το δοθεν         username   απο τον χρηστη, δηλαδη το data["username"] με την βοηθεια της μεθοδου count() και του ελεγχου ισοτητας '== 0', δηλαδη αν το συνολο τον εγγραφων με αυτα τα στοιχεια   ισουται με 0
  Αν ειναι 0, δημιουργειται ενα λεξικο με ονομα 'user' που εχει ως κλειδια τα "username" και "password", τα οποια παιρνουν ως τιμες τα αντιστοιχα username και password που εδωσε   ο χρηστης στο data και επειτα μεσω της μεθοδου insert_one() μπαινει η εγγραφη του λεξικου user στην συλλογη users της MongoDB βασης δεδομενων 'InfoSys' και τελος εμφανιζεται     το μηνυμα επαληθευσης εισαγωγης του χρηστη στην βαση μας.
  Αν δεν ειναι 0 παει να πει οτι υπαρχει ηδη ο χρηστης και εμφανιζεται απλα μηνυμα λαθους λογω διπλοτυπιας.
  
Endponint 2:
  Παλι με μια if και μεθοδο find με querries το username και το password ελεγχω αν τα στοιχεια που εβαλε ο χρηστης και τα υδη υπαρχοντα στοιχεια εχουν συνολο διαφορο του 0,       δηλαδη υπαρχουν ακριβως αυτα τα 2 στο ιδιο λεξικο user και ειναι ιδια με αυτα που εβαλε ο χρηστης και αν περασει την if, καλειται η συναρτηση create_session η οποια             επιστρεφει ενα uuid για την ταυτοποιηση του χρηστη με παραμετρο το username του και το επιστρεφομενο uuid το περναω σε μια μεταβλητη user_uuid, μετα εκτυπωνω το uuid και το     ονομα του χρηστη που εκανε login.
  Αν δεν ειναι ακριβως τα ιδια username και password τοτε εκτυπωνεται μηνυμα λαθους.

Endpoint 3:
  Δεχομαστε ενα email και βαση αυτου ψαχνουμε στην collection 'students' με την εντολη find_one και querries τησ το email του φοιτητη, δηλαδη ελεγχουμε ποιο κλειδι "email" εχει   ως value το email που εδωσε ο χρηστης και το αποτελεσμα αυτου το περναμε σε ενα λεξικο που λεγεται student χωρις ομως το key "id" γιατι το ObjectID, που ειναι το value του,     δεν μπορει να εκτυπωθει με την μεθοδο json.dumps() γιατι δεν ειναι JSON Seriazable.
  Με τον ελεγχο if != None ελεγχω αν το λεξικο που δημιουργηθηκε πριν ειναι κενο, το οποιο συνεπαγεται οτι δεν βρεθηκε φοιτητης με αυτο το email, αλλιως τα στοιχεια του θα ειχαν   περαστει στο λεξικο μας, και αν δεν ειναι κενο εμφανιζω το λεξικο που δημιουργηθηκε με τα στοιχεια του, αλλιως μηνυμα λαθους.

Endpoint 4:
  Στο συγκεκριμενο endpoint ειχα προβληματα στην αρχη λογω του ιδιου ονομα dictionary και βασης δεδομενων, "students", που ζητησατε να δημιουργησουμε αλλα το ξεπερασα αρχικα       δηλωνοντας πρωτιστως οτι students ειναι η collection του 'InfoSys' και μετα δηλωνοντας οτι students ειναι μια λιστα που μεσω της μεθοδου find() παιρνει τις τιμες των φοιτητων   οπου το key "yearOfBirth" έχει value '1991' αλλα χωρις το id παλι, για λογους json οπως ειπαμε πριν.
  Το iteration που γινεται μετα ειναι για την πιο ομορφη εμφανιση της λιστας.
  Τελος, ελεγχεται αν η λιστα ειναι αδεια, αρα και δεν βρεθηκε ο χρηστης, αφου αλλιως θα ειχαν περαστει τα στοιχεια του, και εμφανιζει λαθος
  Αν δεν ειναι 0 το μηκος της λιστας, εμφανιζει την λιστα των στοιχειων των μαθητων που ειναι 30 χρονων.

Endpoint 5:
  Κανουμε ο,τι και πριν με την μονη διαφορα οτι στην μεθοδο find() βαζουμε την προυποθεση το value του key "yearOfBirth" να ειναι μικροτερο ή ισο με "1991", με το $lte, δηλαδη     less than, equal και γινεται ο,τι και στο endpoint 4 μετα.
 
Endpoint 6:
  Δεχομαστε ενα email και βαση αυτου φτιαχνουμε ενα λεξικο "student" και μπαινουν εκει τα στοιχεια απο την collection students, μεσω της find_one() με querry το email και value   του το δοθεν email.
  Αν ειναι αδειο, δηλαδη == None, επιστρεφουμε μηνυμα οτι δεν βρεθηκε χρηστης με το δοθεν email στην ΒΔ μας.
  Αν δεν ειναι None, το λεξικο student παιρνει τις τιμες name, street και postcode απο την ΒΔ μας, οπου για να παρουμε το street και το postcode μονο απο το address, χωρις το     city, περασαμε τις τιμες τους σε ενα λεξικο street και postcode αντιστοιχα που βρισκουν τον φοιτητη βαση του email,με το find_one και επιστρεφουν μονο το address.postcode και   address.postcode αντιστοιχα, δηλαδη το κλειδι street και postcode της λιστας address που ειναι κλειδι της collection "Students".
  Με το if student['street']: ουσιαστικα η if δουλευει μονο αν δεν ειναι αδειο και εμφανιζει το λεξικο student στον χρηστη, αλλιως αν ειναι αδειο παει να πει οτι δεν περασαν οι   τιμες γιατι δεν υπηρχαν τιμες για street και postcode, που ισχυει για μερικους χρηστες της λιστας students.json που μας δοθηκε.

Endpoint 7:
  Δεχομαστε παλι ενα email και με την find_one περναμε τα στοιχεια του μαθητη που αντιστοιχει το email σε ενα λεξικο με ονομα "student".
  Ελεγχουμε αν ειναι κενο και αν ειναι εμφανιζουμε λαθος.
  Αν δεν ειναι, μεσω json.dumps(student) μετατρεπω το λεξικο student σε string και το αναθετω στην string μεταβλητη stringDeleted για να το περασω στο str msg που επιστρεφεται     στο τελος, γιατι δεν δεχεται μια μεταβλητη string και dict μαζι.
  Μετα με την μεθοδο delete_one() διαγραφω απο την βαση students την εγγραφη που εχει ως key "email" για value το δοθεν email απο τον χρηστη και το εμφανιζω στον χρηστη.
 
Endpoint 8:
  Βαζω παλι μεσω της find_one τα στοιχεια του φοιτητη με το δοθεν email σε ενα λεξικο "student" και αν δεν ειναι κενο μεσω της update_one και της παραμετρου $set οριζω νεο key     στο λεξικο του χρηστη της collection "Students" με ονομα 'courses' και value του την λιστα 'courses' που εχει δωσει στην αρχη ο χρηστης μαζι με το email.
  Επαναλαμβανω μετα το find_one για να το περασω σε ενα str msg μεσω json.dumps() και το εμφανιζω στον χρηστη γιατι αλλιως επρεπε να στειλει 2 ιδια request για να δει τις         αλλαγες που εκανε, αν εκανε.
  Αν ειναι αδειο το λεξικο εξ αρχης παει να πει οτι δεν υπαρχει ο χρηστης και το δηλωνω

Endpoint 9:
  Δεν το καταφερα γιατι δεν ξερω πως να δειξω τις τιμες των τιμων του courses καθως δνε μπορω να προβλεψω ποια μαθηματα θα βαλει ο χρηστης οποτε και να κοιταξω τις τιμες αυτων.
